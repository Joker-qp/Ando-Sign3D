# ğŸ”§ Hata AyÄ±klama ve Sorun Giderme KÄ±lavuzu

## âœ… DÃ¼zeltilen Hatalar (v1.1)

### Slider TypeError HatasÄ± - Ã‡Ã–ZÃœLDÃœ âœ…
**Hata MesajÄ±:**
```
TypeError: '>' not supported between instances of 'str' and 'int'
```

**Neden Oldu:**
- CTkSlider widget'larÄ± `StringVar` ile Ã§alÄ±ÅŸmÄ±yor
- SayÄ±sal deÄŸerler iÃ§in `DoubleVar` veya `IntVar` kullanÄ±lmasÄ± gerekiyor

**Ã‡Ã¶zÃ¼m:**
```python
# YANLIÅ âŒ
rpm_var = ctk.StringVar(value="450")

# DOÄRU âœ…
rpm_var = ctk.DoubleVar(value=450)
```

**YapÄ±lan DeÄŸiÅŸiklikler:**
1. âœ… RPM slider: `StringVar` â†’ `DoubleVar`
2. âœ… Faz slider: `StringVar` â†’ `DoubleVar`
3. âœ… IÅŸÄ±k slider: `StringVar` â†’ `DoubleVar`
4. âœ… Label gÃ¼ncellemeleri iÃ§in callback fonksiyonlarÄ± eklendi
5. âœ… Komut gÃ¶nderirken tip dÃ¶nÃ¼ÅŸÃ¼mleri dÃ¼zeltildi

## ğŸ” YaygÄ±n Hatalar ve Ã‡Ã¶zÃ¼mleri

### 1. WebSocket BaÄŸlantÄ± HatalarÄ±

**Problem:** Cihaza baÄŸlanÄ±lamÄ±yor
```
âŒ [device_name] BaÄŸlantÄ± hatasÄ±: ...
```

**Ã‡Ã¶zÃ¼mler:**
- [ ] IP adresini kontrol edin
- [ ] Port numarasÄ±nÄ± kontrol edin (varsayÄ±lan: 8080)
- [ ] CihazÄ±n Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan emin olun
- [ ] Firewall ayarlarÄ±nÄ± kontrol edin
- [ ] AynÄ± aÄŸda olduÄŸunuzu doÄŸrulayÄ±n

**Test Komutu:**
```bash
# Windows
ping 192.168.1.100

# Linux/Mac
ping -c 4 192.168.1.100
```

### 2. Komut GÃ¶nderilmiyor

**Problem:** Komutlar cihaza gitmiyor
```
âš ï¸ [device_name] BaÄŸlÄ± deÄŸil
```

**Ã‡Ã¶zÃ¼mler:**
1. Cihaz durumunu kontrol edin (ğŸŸ¢ olmalÄ±)
2. `gui.log` dosyasÄ±nÄ± inceleyin
3. CihazÄ± yeniden baÄŸlayÄ±n:
   - "BaÄŸlantÄ±yÄ± Kes" â†’ Bekle â†’ "BaÄŸlan"
4. Device ID'nin doÄŸru olduÄŸunu kontrol edin

### 3. AÄŸ TaramasÄ± Ã‡alÄ±ÅŸmÄ±yor

**Problem:** Tarama hiÃ§bir cihaz bulamÄ±yor

**Ã‡Ã¶zÃ¼mler:**
- [ ] IP aralÄ±ÄŸÄ±nÄ± kontrol edin (Ã¶rn: 192.168.1)
- [ ] Timeout sÃ¼resini artÄ±rÄ±n (Ayarlar > Tarama Timeout)
- [ ] Administrator/root yetkisi ile Ã§alÄ±ÅŸtÄ±rÄ±n
- [ ] ICMP (ping) trafiÄŸine izin verildiÄŸinden emin olun

**Manuel Test:**
```python
# Python konsolunda test
import asyncio
import websockets

async def test():
    async with websockets.connect("ws://192.168.1.100:8080/ws") as ws:
        await ws.send("PING")
        response = await ws.recv()
        print(f"Cevap: {response}")

asyncio.run(test())
```

### 4. GUI Donuyor

**Problem:** ArayÃ¼z yanÄ±t vermiyor

**Ã‡Ã¶zÃ¼mler:**
1. Asyncio event loop'un Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan emin olun
2. UygulamayÄ± yeniden baÅŸlatÄ±n
3. `gui.log` dosyasÄ±nÄ± kontrol edin
4. Python sÃ¼rÃ¼mÃ¼nÃ¼ kontrol edin (3.11+ Ã¶nerilir)

### 5. KonfigÃ¼rasyon Kayboldu

**Problem:** Cihazlar veya kÄ±sayollar kayboldu

**Ã‡Ã¶zÃ¼mler:**
- [ ] `gui_config.json` dosyasÄ±nÄ± kontrol edin
- [ ] Dosya izinlerini kontrol edin
- [ ] Yedek dosya varsa geri yÃ¼kleyin

**Yedekleme:**
```bash
# Windows
copy gui_config.json gui_config.backup.json

# Linux/Mac
cp gui_config.json gui_config.backup.json
```

## ğŸ› Debug Modunu EtkinleÅŸtirme

### Log Seviyesini DeÄŸiÅŸtirme

`hologram_gui.py` dosyasÄ±nÄ±n baÅŸÄ±nda:

```python
# DetaylÄ± loglar iÃ§in
logging.basicConfig(
    level=logging.DEBUG,  # INFO â†’ DEBUG
    ...
)
```

### Belirli ModÃ¼ller Ä°Ã§in Debug

```python
# WebSocket baÄŸlantÄ±larÄ± iÃ§in
logging.getLogger('websockets').setLevel(logging.DEBUG)

# Asyncio iÃ§in
logging.getLogger('asyncio').setLevel(logging.DEBUG)
```

## ğŸ“ Log DosyasÄ± Analizi

### gui.log Ä°nceleme

**BaÅŸarÄ±lÄ± BaÄŸlantÄ±:**
```
âœ… [holo1] BaÄŸlandÄ±: 192.168.1.100
[holo1] PING gÃ¶nderildi
```

**BaÄŸlantÄ± HatasÄ±:**
```
âŒ [holo1] BaÄŸlantÄ± hatasÄ±: [Errno 10061] ...
ğŸ”„ [holo1] 3s sonra yeniden baÄŸlanÄ±lacak...
```

**Komut GÃ¶nderimi:**
```
ğŸ“¤ [holo1] Komut gÃ¶nderildi: model https://...
```

## ğŸ”§ Manuel Testler

### 1. WebSocket BaÄŸlantÄ± Testi

```python
import asyncio
import websockets

async def test_connection(ip, port=8080):
    try:
        async with websockets.connect(f"ws://{ip}:{port}/ws") as ws:
            # PING gÃ¶nder
            await ws.send("PING")
            response = await ws.recv()
            print(f"âœ… PING cevabÄ±: {response}")
            
            # ID iste
            await ws.send("GET_ID")
            device_id = await ws.recv()
            print(f"âœ… Device ID: {device_id}")
            
            return True
    except Exception as e:
        print(f"âŒ Hata: {e}")
        return False

# Test et
asyncio.run(test_connection("192.168.1.100"))
```

### 2. Komut GÃ¶nderme Testi

```python
async def test_command(ip, device_id, command, port=8080):
    try:
        async with websockets.connect(f"ws://{ip}:{port}/ws") as ws:
            message = f"{device_id} {command}"
            await ws.send(message)
            print(f"âœ… Komut gÃ¶nderildi: {message}")
            await asyncio.sleep(1)
            return True
    except Exception as e:
        print(f"âŒ Hata: {e}")
        return False

# Test et
asyncio.run(test_command(
    "192.168.1.100",
    "DEVICE_192_168_1_100",
    "rpm 450"
))
```

### 3. AÄŸ Tarama Testi

```python
async def test_scan(ip_range="192.168.1"):
    import subprocess
    import platform
    
    param = '-n' if platform.system().lower() == 'windows' else '-c'
    
    active_ips = []
    for i in range(1, 255):
        ip = f"{ip_range}.{i}"
        try:
            result = await asyncio.create_subprocess_exec(
                'ping', param, '1', '-w', '100', ip,
                stdout=asyncio.subprocess.DEVNULL,
                stderr=asyncio.subprocess.DEVNULL
            )
            await asyncio.wait_for(result.wait(), timeout=1.0)
            if result.returncode == 0:
                active_ips.append(ip)
                print(f"âœ… Aktif: {ip}")
        except:
            pass
    
    print(f"\nğŸ“¡ Toplam {len(active_ips)} aktif IP bulundu")
    return active_ips

# Test et
asyncio.run(test_scan("192.168.1"))
```

## âš ï¸ Bilinen SÄ±nÄ±rlamalar

1. **Asyncio Event Loop**
   - Windows'ta bazÄ± asyncio Ã¶zellikleri farklÄ± Ã§alÄ±ÅŸabilir
   - Python 3.11+ kullanmanÄ±z Ã¶nerilir

2. **WebSocket BaÄŸlantÄ±larÄ±**
   - SSL/TLS desteÄŸi yok (ws://, wss:// deÄŸil)
   - Kimlik doÄŸrulama yok
   - GÃ¼venli aÄŸlarda kullanÄ±n

3. **AÄŸ TaramasÄ±**
   - Firewall ping'i engelleyebilir
   - BÃ¼yÃ¼k aÄŸlarda yavaÅŸ olabilir (254 IP)
   - Administrator/root yetkisi gerekebilir

4. **GUI Thread Safety**
   - Asyncio coroutine'leri Tkinter thread'inden Ã§aÄŸrÄ±lÄ±r
   - BazÄ± durumlarda senkronizasyon sorunlarÄ± olabilir

## ğŸ†˜ Acil Durum Ã‡Ã¶zÃ¼mleri

### Uygulama AÃ§Ä±lmÄ±yor

```bash
# 1. BaÄŸÄ±mlÄ±lÄ±klarÄ± yeniden yÃ¼kle
pip uninstall customtkinter websockets -y
pip install customtkinter websockets

# 2. Config dosyalarÄ±nÄ± sil
del gui_config.json
del gui_settings.json

# 3. Log dosyasÄ±nÄ± kontrol et
type gui.log  # Windows
cat gui.log   # Linux/Mac
```

### Cihazlar GÃ¶rÃ¼nmÃ¼yor

```python
# gui_config.json dosyasÄ±nÄ± dÃ¼zenle
{
  "devices": {},
  "shortcuts": {}
}
```

### Tema Ã‡alÄ±ÅŸmÄ±yor

```python
# gui_settings.json dosyasÄ±nÄ± dÃ¼zenle
{
  "theme": "dark",
  "color_theme": "blue"
}
```

## ğŸ“ Destek Alma

### Log Toplama

Sorun bildirirken ÅŸunlarÄ± paylaÅŸÄ±n:

1. **gui.log** dosyasÄ±
2. **Hata mesajÄ±** (tam metin)
3. **Python sÃ¼rÃ¼mÃ¼**: `python --version`
4. **Ä°ÅŸletim sistemi**: Windows/Linux/Mac
5. **Paket sÃ¼rÃ¼mleri**: `pip freeze`

### Ã–rnek Rapor

```
**Sorun:** Cihaza baÄŸlanamÄ±yorum

**Ortam:**
- Python: 3.11.2
- OS: Windows 11
- customtkinter: 5.2.1
- websockets: 12.0

**Hata:**
[gui.log'dan ilgili satÄ±rlar]

**Denenenler:**
- IP ve port kontrol edildi
- Firewall kapatÄ±ldÄ±
- Cihaz Ã§alÄ±ÅŸÄ±yor ve aynÄ± aÄŸda
```

## ğŸ”„ SÃ¼rÃ¼m NotlarÄ±

### v1.1 (2025-02-08)
- âœ… Slider TypeError hatasÄ± dÃ¼zeltildi
- âœ… StringVar â†’ DoubleVar/IntVar dÃ¶nÃ¼ÅŸÃ¼mÃ¼
- âœ… Label gÃ¼ncelleme callback'leri eklendi
- âœ… Parametre gÃ¶nderme dÃ¼zeltildi

### v1.0 (2025-02-08)
- ğŸ‰ Ä°lk sÃ¼rÃ¼m yayÄ±nlandÄ±
- âœ… TÃ¼m temel Ã¶zellikler eklendi

---

**ğŸ’¡ Ä°pucu:** Sorun Ã§Ã¶zemiyorsanÄ±z, uygulamayÄ± kapatÄ±p yeniden baÅŸlatÄ±n ve `gui.log` dosyasÄ±nÄ± inceleyin!